{% extends "foodie/base.html" %}
{% load staticfiles %}

{% block content %}
<div class="container">
  <div class="jumbotron">
    <p>Description: {{ userprofile.description }}</p>
    <!-- <p>Total preferences: {{ userprofile.preferences.all.length }}</p> -->
    <p>Preferences:</p>
    {% for preference in userprofile.preferences.all %}
      <p>{{preference.cuisine}}</p>
    {% endfor %}
    <!-- check if user's profile's profile picture exist, 
      parse the user picture path for img,
      else use the default picture from static path -->
    {% if  user.userprofile.profile_pic %}
      <!-- image src only need this project path, os.path is done in settings.py and urls.py -->
      <img src="{{ user.userprofile.profile_pic.url }}">
    {% else %}
      <img src="{% static 'images/img_profile.png'%}">
    {%endif%}
    <h2> {{ user }}'s Reviews</h2>
      <div id="user_reviews">
          {% for review in user_reviews %}
            <h3>{{review.restaurant}} {{review.rating}}</h3>
            <h4>{{review.content}}</h4>
            <h4>{{review.user}}</h4>
          {% endfor %}
      </div>
    <h2> {{ user }}'s favourite places</h2>
    <div id="user_reviews">
        {% for rest in user_saved_rest %}
          <h3>{{rest.name}}</h3>
          <h4>{{rest.cuisine}}</h4>
          <h4>{{rest.description}}</h4>
          <form action="review">
            <input type="submit" value="Review {{rest.name}}" />
          </form>
        {% endfor %}
    </div>
  </div>
</div>
{% endblock %}