{% extends "foodie/base.html" %}
{% load staticfiles %}

{% block content %}
<div id="profile">
  <h2 id="profileHeader">{{ user }}'s Profile</h2>
  {% if  user.userprofile.profile_pic %}
  <!-- image src only need this project path, os.path is done in settings.py and urls.py -->
  <img id="profileImg" src="{{ user.userprofile.profile_pic.url }}">
  {% else %}
  <img id="profileImg"  src="{% static 'images/img_profile.png'%}">
  {%endif%}
  <p id="profileDesc">Description: {{ userprofile.description }}</p>
</div>

<div id="profile2">
  <!-- <p>Total preferences: {{ userprofile.preferences.all.length }}</p> -->
  <div id="profilePref">
    <h3>Preferences:</h3>
      {% for preference in userprofile.preferences.all %}
      <p id="preferences">{{preference.cuisine}}</p>
      {% endfor %}
  </div>    
  <!-- check if user's profile's profile picture exist, 
    parse the user picture path for img,
    else use the default picture from static path -->
  <div id="profileRest">
    <h3> {{ user }}'s favorite places</h3>
      <div id="user_saved">
        {% for rest in user_saved_rest %}
          <h4>{{rest.name}}</h4>
          <p>{{rest.description}}</p>
          <p>{{rest.cuisine}}</p>
          <form action="review">
              <input type="submit" value="Review {{rest.name}}" />
            </form>
        {% endfor %}
      </div>
  </div>
</div>

<div id="profile3">
  <h2 id="profileReview"> {{ user }}'s Reviews</h2>
    <div id="user_reviews">
        {% for review in user_reviews %}
          <h4>{{review.restaurant}} {{review.rating}}</h4>
          <p>{{review.content}}</p>
          <p>{{review.user}}</p>
          {% endfor %}

        {% for rest in user_saved_rest %}
          <h3>{{rest.name}}</h3>
          <h4>{{rest.cuisine}}</h4>
          <h4>{{rest.description}}</h4>
          <form action="review">
              <input type="submit" value ="Remove">
            <input type="submit" value="Review {{rest.name}}" />
          </form>
        {% endfor %}
    </div>
</div>
{% endblock %}